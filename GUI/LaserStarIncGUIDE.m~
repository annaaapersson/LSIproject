%% Graphical user interface for the LaserStarInc software
% Common objects for the whole interface

fig = figure(...
    'Visible', 'on',...
    'Position', [100 100 1280 720],...
    'Name', 'LaserStarInc', ...
    'Toolbar', 'none', ...
    'MenuBar', 'none');

background = uipanel(...
    'Title','',...
    'Position',[190/1280 40/720 1020/1280 640/720],...
    'BackgroundColor', 'white',...
    'Visible', 'on');

%--------------------------------------------------------------------------
% videoPanel
videoPanel = uipanel(...
    'Parent', background,...
    'Position', [445/1020 35/640 540/1020 570/640],...
    'Bordertype','none',...
    'Visible', 'off')

        videoStream = axes(...
            'Parent', videoPanel, ...
            'Position', [0 0 1 1])
%--------------------------------------------------------------------------
% Settings Window panel [reorganized by dedicated panel]
% panel half the size of the background panel
settingsPanel = uipanel(...
    'Parent', background, ...
    'Position', [0 0 425/1020 640/640],...
    'Bordertype', 'none',...
    'Visible', 'off', ...
    'BackgroundColor', 'white')

        % Button at the bottom responsible for starting the laser
        buttonStartSettings = uicontrol(...
            'Parent', settingsPanel,...
            'Units', 'normalized', ...
            'Style', 'pushbutton',...
            'Position', [35/425 54/640 380/425 100/640],...
            'String','Start System with set Parameters',...
            'FontSize',20)

        % kernel size axis for the image [checkup needed for images]
        kernelImg = axes(...
            'Parent', settingsPanel,...
            'Position', [49/425 216/640 64/425 64/640]);

        % slider to set the kernel size
        kernSlider = uicontrol(...
            'Parent', settingsPanel, ...
            'Units','normalized',...
            'Style', 'slider',...
            'Position', [145/425 248/640 240/425 3/640])

        % Gain size axis for the image [checkup needed for images]
        gainImg = axes(...
            'Parent', settingsPanel,...
            'Position', [49/425 360/640 64/425 64/640]);

        % slider to set the gain
        gainSlider = uicontrol(...
            'Parent', settingsPanel,...
            'Units','normalized',...
            'Style', 'slider', ...
            'Position', [145/425 392/640 240/425 3/640])

        % Exposure size axis for the image [checkup needed for images]
        exposureImg = axes(...
            'Parent', settingsPanel, ...
            'Position', [49/425 504/640 64/425 64/640]);

        % slider to set the exposure
        exposureSlider = uicontrol(...
            'Parent', settingsPanel,...
            'Units','normalized',...
            'Style', 'slider', ...
            'Position', [145/425 536/640 240/425 3/640])

% MEASURE
%##########################################################################
%##########################################################################

% Measure panel with common elements
%--------------------------------------------------------------------------

measurePanel = uipanel(...
    'Parent', background, ...
    'Position', [0 0 425/1020 640/640],...
    'Bordertype', 'none',...
    'Visible', 'off', ...
    'BackgroundColor', 'white')

% % PATIENT
%##########################################################################
%##########################################################################

% measure: Patient windows section
%--------------------------------------------------------------------------

%panel for the patient button
patientPanel = uipanel(...
    'Parent', measurePanel,...
    'Position', [0 0  1 460/640],...
    'Bordertype', 'none', ...
    'BackgroundColor', 'white', ...
    'Visible', 'off')

        % Label indicating the user to enter the patientID
        patientIDLabel = uicontrol(...
            'Parent', patientPanel,...
            'Style', 'Text',...
            'Units','normalized',...
            'String', 'Enter PatientID',...
            'FontSize', 24,...
            'Position', [35/425 417/460 380/425 30/460],...
            'HorizontalAlignment','left', ...
            'BackgroundColor', 'white')

        patientIDField = uicontrol(...
            'Parent', patientPanel,...
            'Units','normalized',...
            'Style', 'Edit', ...
            'Position', [35/425 377/460 380/425 30/460])

        enterButton = uicontrol(...
            'Parent', patientPanel, ...
            'Style', 'pushbutton', ...
            'Units','normalized',...
            'Position', [35/425 338/460 100/425 30/460],...
            'String', 'Enter');

        % Title to register new patient
        registerPatientLabel = uicontrol(...
            'Parent', patientPanel,...
            'Style', 'Text',...
            'Units','normalized', ...
            'Position', [35/425 273/460 380/425 30/460], ...
            'String', 'Register new Patient',...
            'FontSize', 24, ...
            'BackgroundColor', 'white');

        % Label indicating the user to enter name
        nameLabel = uicontrol(...
            'Parent', patientPanel,...
            'Style', 'Text', ...
            'String', 'Name', ...
            'Units','normalized', ...
            'FontSize', 20, ...
            'Position',[35/425 233/460 380/425 30/460], ...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % Name edit field
        nameField = uicontrol(...
            'Parent', patientPanel, ...
            'Style','Edit',...
            'Units','normalized',...
            'Position', [35/425 194/460 380/425 30/460])

        % SSN Label
        SSNLabel= uicontrol(...
            'Parent', patientPanel, ...
            'Style', 'Text', ...
            'String','Social Security Number', ...
            'FontSize', 20,...
            'Units','normalized',... 
            'Position', [35/425 129/460 380/425 30/460],...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % SSN edit field
        SSNEdit = uicontrol(...
            'Parent', patientPanel,...
            'Units','normalized',...
            'Position', [35/425 89/460 380/425 30/460],...
            'Style','Edit')

        % Enter Button
        enter2Button = uicontrol(...
            'Parent', patientPanel,...
            'Units','normalized',...
            'Position', [35/425 50/460 100/425 30/460],...
            'Style', 'Pushbutton', ...
            'String', 'Enter')

% ROI
%##########################################################################
%##########################################################################

% Measure section: ROI
%--------------------------------------------------------------------------

% Panel for ROI1
roi1Panel = uipanel(...
    'Parent', measurePanel, ...
    'Position',[35/425 258/640 380/425 189/640], ...
    'BackgroundColor', 'white',...
    'Visible', 'off')

roi2Panel = uipanel(...
    'Parent', measurePanel,...
    'Position',[35/425 49/640 380/425 189/640], ...
    'BackgroundColor', 'white',...
    'Visible', 'off')

% Inside ROI1
%--------------------------------------------------------------------------

        % Size label
        sizeLabel1 = uicontrol(...
            'Parent', roi1Panel,...
            'Units','normalized', ...
            'Position', [20/380 149/189 136/380 24/189],...
            'FontSize', 20, ...
            'String', 'Size', ...
            'Style', 'Text', ...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % Height label
        heightLabel1 = uicontrol(...
            'Parent', roi1Panel, ...
            'Units','normalized',...
            'Position', [20/380 99/189 75/380 24/189],...
            'FontSize', 16, ...
            'String', 'Height:', ...
            'Style', 'Text', ....
            'HorizontalAlignment','left', ...
            'BackgroundColor', 'white')

        % Width label
        widthLabel1 = uicontrol(...
            'Parent', roi1Panel, ...
            'Units','normalized',...
            'Position', [20/380 59/189 75/380 24/189],...
            'FontSize', 16, ...
            'String', 'Width:', ...
            'Style', 'Text', ...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % x label
        xLabel1 = uicontrol(...
            'Parent', roi1Panel,...
            'Units','normalized',...
            'Position', [188/380 99/189 85/380 24/189],...
            'FontSize', 16, ...
            'String', 'x:', ...
            'Style', 'Text',...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % y label
        yLabel1 = uicontrol(...
            'Parent', roi1Panel, ....
            'Units','normalized',...
            'Position', [188/380 59/189 85/380 24/189],...
            'FontSize', 16, ...
            'String', 'y:', ...
            'Style', 'Text',...
            'HorizontalAlignment','left', ...
            'BackgroundColor', 'white')

        % Position label
        PositionLabel1 = uicontrol(...
            'Parent', roi1Panel, ...
            'Units','normalized',...
            'Position', [188/380 149/189 136/380 24/189],...
            'FontSize', 20, ...
            'String', 'Position', ...
            'Style', 'Text',...
            'HorizontalAlignment', 'left',...
            'BackgroundColor', 'white')

        % Editfield for height
        height1Edit = uicontrol(...
            'Parent', roi1Panel,...
            'Units','normalized',...
            'Position', [85/380 99/189 85/380 24/189],...
            'Style', 'Edit')

        % edditfield for width
        width1Edit = uicontrol(...
            'Parent', roi1Panel, ...
            'Units','normalized',...
            'Position', [85/380 59/189 85/380 24/189], ...
            'Style', 'Edit')

        x1Edit = uicontrol(...
            'Parent', roi1Panel,...
            'Units','normalized',...
            'Position', [210/380 99/189 85/380 24/189], ...
            'Style', 'Edit')

        % panel for all the objects dedicated to ROI 1
        y1Edit = uicontrol(...
            'Parent', roi1Panel,...
            'Units','normalized',...
            'Position', [210/380 59/189 85/380 24/189],...
            'Style', 'Edit')

        % remove button to delete an existing ROI 1
        rmvROI1 = uicontrol(...
            'Parent', roi1Panel,...
            'Units','normalized',...
            'Position', [316/380 25/189 44/380 44/189], ...
            'String', 'Rmv', ...
            'Style', 'Pushbutton')
        
% TODO: symbol for remove / add

        % add button to create a new ROI1
        addROI1 = uicontrol(...
            'Parent', roi1Panel,...
            'Units','normalized',...
            'Position', [316/380 99/189 44/380 44/189], ...
            'String', 'Add',...
            'Style', 'Pushbutton')

        % label indicating ROI 1
        labelROI1 = uicontrol(...
            'Style', 'Text', ...
            'Parent', roi1Panel,...
            'Units','normalized',...
            'Position', [321/380 74/189 60/380 20/189],...
            'String','ROI 1',...
            'FontSize', 14,...
            'HorizontalAlignment','left', ...
            'BackgroundColor', 'white');

        % apply button 12 of roi 1 for width and height 
        apply12Button = uicontrol(...
            'Parent', roi1Panel,...
            'Units','normalized',...
            'Position', [210/380 25/189 85/380 24/189],...
            'Style', 'Pushbutton',...
            'String', 'Apply')

        % apply button 11 of roi 1 for width and height
        apply22Button = uicontrol(...
            'Parent', roi1Panel, ...
            'Units','normalized',...
            'Position', [85/380 25/189 85/380 24/189],...
            'Style', 'Pushbutton',...
            'String', 'Apply')
        
% Inside ROI 2
%--------------------------------------------------------------------------


        % Size label
        sizeLabel1 = uicontrol(...
            'Parent', roi2Panel, ...
            'Units','normalized',...
            'Position', [20/380 149/189 136/380 24/189],...
            'FontSize', 20, ...
            'String', 'Size', ...
            'Style', 'Text',...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % Height label
        heightLabel1 = uicontrol(...
            'Parent', roi2Panel, ...
            'Units','normalized',...
            'Position', [20/380 99/189 75/380 24/189],...
            'FontSize', 16, ...
            'String', 'Height:', ...
            'Style', 'Text',...
            'HorizontalAlignment','left', ...
            'BackgroundColor', 'white');

        % Width label
        widthLabel1 = uicontrol(...
            'Parent', roi2Panel,...
            'Units','normalized',...
            'Position', [20/380 59/189 75/380 24/189],...
            'FontSize', 16,...
            'String', 'Width:', ...
            'Style', 'Text',...
            'HorizontalAlignment','left', ...
            'BackgroundColor', 'white')

        % x label
        xLabel1 = uicontrol(...
            'Parent', roi2Panel,...
            'Units','normalized',...
            'Position', [188/380 99/189 85/380 24/189],...
            'FontSize', 16,...
            'String', 'x:', ...
            'Style', 'Text',...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % y label
        yLabel1 = uicontrol(...
            'Parent', roi2Panel,...
            'Units','normalized',...
            'Position', [188/380 59/189 85/380 24/189],...
            'FontSize', 16, ...
            'String', 'y:',...
            'Style', 'Text',...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % Position label
        PositionLabel1 = uicontrol(...
            'Parent', roi2Panel, ...
            'Units','normalized',...
            'Position', [188/380 149/189 136/380 24/189],...
            'FontSize', 20,...
            'String', 'Position',...
            'Style', 'Text',...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % Editfield for height
        height1Edit = uicontrol(...
            'Parent', roi2Panel, ...
            'Units','normalized',...
            'Position', [85/380 99/189 85/380 24/189],...
            'Style', 'Edit')

        % edditfield for width
        width1Edit = uicontrol(...
            'Parent', roi2Panel,...
            'Units','normalized',...
            'Position', [85/380 59/189 85/380 24/189], ...
            'Style', 'Edit')

        x1Edit = uicontrol(...
            'Parent', roi2Panel,...
            'Units','normalized',...
            'Position', [210/380 99/189 85/380 24/189], ...
            'Style', 'Edit')

        % panel for all the objects dedicated to ROI 2
        y1Edit = uicontrol(...
            'Parent', roi2Panel,...
            'Units','normalized',...
            'Position', [210/380 59/189 85/380 24/189],...
            'Style', 'Edit')

        % remove button to delete an existing ROI 2
        rmvROI1 = uicontrol(...
            'Parent', roi2Panel,...
            'Units','normalized',...
            'Position', [316/380 25/189 44/380 44/189], ...
            'String', 'Rmv',...
            'Style', 'Pushbutton')

        % add button to create a new ROI2
        addROI1 = uicontrol(...
            'Parent', roi2Panel,...
            'Units','normalized',...
            'Position', [316/380 99/189 44/380 44/189], ...
            'String', 'Add',...
            'Style', 'Pushbutton')

        % label indicating ROI 2
        labelROI1 = uicontrol(...
            'Style', 'Text', ...
            'Parent',roi2Panel,...
            'Units','normalized',...
            'Position', [321/380 74/189 60/380 20/189], ...
            'String','ROI 2', ...
            'FontSize', 14,...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white');

        % apply button 22 of roi 2 for width and height 
        apply12Button = uicontrol(...
            'Parent', roi2Panel,...
            'Units','normalized',...
            'Position', [210/380 25/189 85/380 24/189],...
            'Style', 'Pushbutton', ...
            'String', 'Apply')

        % apply button 22 of roi 2 for width and height
        apply22Button = uicontrol(...
            'Parent', roi2Panel,...
            'Units','normalized',...
            'Position', [85/380 25/189 85/380 24/189],...
            'Style', 'Pushbutton', ...
            'String', 'Apply')

%##########################################################################
%##########################################################################

% Measure Window Start/Stop Recording
%--------------------------------------------------------------------------

% definition of the axes for the presentation of the average
% intensity of the perfusion 

% panel for the objects of measure window start stop recording
startRecordingPanel = uipanel(...
    'Parent',measurePanel, ...
    'Bordertype','none', ...
    'Position', [0 0 1 460/640], ...
    'Visible','off',...
    'BackgroundColor','white')


        roiGraph = axes(...
            'Parent',startRecordingPanel, ...
            'Position',[35/425 35/460 375/425 380/460])

        % Add functionality here - display time recorded here
        timeRecordedLabel = uicontrol(...
            'Parent', startRecordingPanel, ...
            'Units','normalized',...
            'Position',[35/425 431/460 425/425 30/460], ...
            'Style', 'Text', ...
            'String', 'Time Recorded:         00:00', ...
            'FontSize', 20)

%##########################################################################
%##########################################################################

% measure window start/stop save
%--------------------------------------------------------------------------

        % panel housing all elements of save 

        savePanel = uipanel(...
            'Parent', measurePanel,...
            'Position',[0 0 1 460/640], ...
            'Visible', 'off',...
            'Bordertype', 'none',...
            'BackgroundColor', 'white')

                % smaller roiGraph
                smallerRoiGraph = axes(...
                    'Parent',savePanel,...
                    'Position',[35/425 35/460 380/425 288/460]);

                % panel conainting options on how to save
                saveMeasurementPanel = uipanel(...
                    'Parent', savePanel, ...
                    'Position',[35/425 336/460 380/425 110/460],  ...
                    'Visible', 'off', ...
                    'BackgroundColor', 'white');

                        % label examination name
                        examinationNameLabel = uicontrol(...
                            'Parent', saveMeasurementPanel,...
                            'Style', 'Text',...
                            'Units','normalized',...
                            'String', 'Examination Name:', ...
                            'Position',[20/380 65/110 200/380 30/110], ...
                            'FontSize', 20,...
                            'HorizontalAlignment','left',...
                            'BackgroundColor', 'white')

                        % edit field examination name
                        examinationNameEditField = uicontrol(...
                            'Parent', saveMeasurementPanel,...
                            'Units','normalized',...
                            'Position', [20/380 25/110 250/380 30/110],...
                            'Style', 'Edit')

%##########################################################################
%##########################################################################

% HISTORY
%--------------------------------------------------------------------------
% history panel
historyPanel = uipanel(...
    'Parent', background, ...
    'Position',[0 0 1 1],...
    'Bordertype', 'none', ...
    'BackgroundColor', 'white',...
    'Visible','off')

        % new patient button
        newPatientButton = uicontrol(...
            'Parent', historyPanel,...
            'Style', 'Pushbutton', ...
            'Units','normalized',...
            'Position', [35/1020 481/640 455/1020 110/640],...
            'String','Register New Patient',...
            'FontSize', 24)

        % panel housing the setup
        enterPatientIDPanel = uipanel(...
            'Parent',historyPanel, ...
            'Position',[530/1020 481/640 455/1020 110/640],...
            'BackgroundColor','white')

                % enter patient ID label
                enterPatientLabel = uicontrol(...
                    'Parent', enterPatientIDPanel,...
                    'Style', 'Text',...
                    'Units','normalized',...
                    'Position', [20/455 61/110 150/455 22/110], ...
                    'String','Enter Patient ID',...
                    'FontSize', 20,...
                    'HorizontalAlignment','left', ...
                    'BackgroundColor', 'white')

                % enter patient ID edit field
                enterPatientIDEditField = uicontrol(...
                    'Parent', enterPatientIDPanel,...
                    'Style', 'Edit', ...
                    'Units','normalized',...
                    'Position', [20/455 25/110 260/455 22/110])


% patient data table
%--------------------------------------------------------------------------
        % panel housing the data table
        examinationTablePanel = uipanel(...
            'Parent', historyPanel, ...
            'Position',[35/1020 35/640 950/1020 428/640], ...
            'BackgroundColor','white',...
            'Visible', 'off')

                % table storing the past examinations
                examinationDataTable = uitable(...
                    'Parent', examinationTablePanel,...
                    'Units','normalized',...
                    'Position',[0 0 1 1],...
                    'ColumnName', {'Examination'; 'Physician'; ...
                    'Date'; 'Exposure';'Gain'; 'ROI Size'},...
                    'RowName', {})
% TODO: setting the length of the columns accordingly
% Database after logging the patient in

% register new patient
%--------------------------------------------------------------------------
        % panel housing the set new patient up objects
        patientDBPanel = uipanel(...
            'Parent', historyPanel, ...
            'Position',[35/1020 35/640 950/1020 428/640],...
            'Visible', 'off', ...
            'BackgroundColor','white')

                % setup new patient label
                setupPatientLabel = uicontrol(...
                    'Parent', patientDBPanel, ...
                    'Style','Text',...
                    'Units','normalized',...
                    'FontSize', 24,...
                    'Position', [35/950 325/428 350/950 30/428],...
                    'String','Setup new Patient',...
                    'HorizontalAlignment','left', ...
                    'BackgroundColor', 'white')

                % name label
                nameDBLabel = uicontrol(...
                    'Parent', patientDBPanel, ...
                    'Style','Text',...
                    'FontSize', 20, ...
                    'Units','normalized',...
                    'Position', [35/950 230/428 270/950 30/428],...
                    'String','Name:',...
                    'HorizontalAlignment','left',...
                    'BackgroundColor', 'white')

                % social security number label
                SSNDBLabel = uicontrol(...
                    'Parent', patientDBPanel, ...
                    'Style','Text',...
                    'FontSize', 20, ...
                    'Units','normalized',...
                    'Position', [35/950 170/428 270/950 30/428], ...
                    'String','Social Security Number: ',...
                    'HorizontalAlignment','left',...
                    'BackgroundColor', 'white')

                % save button
                saveDBButton = uicontrol(...
                    'Parent', patientDBPanel, ...
                    'Style','Pushbutton',...
                    'FontSize', 20,...
                    'Units','normalized',...
                    'Position', [35/950 90/428 270/950 50/428], ...
                    'String','Save')

                nameDBEdit = uicontrol(...
                    'Parent', patientDBPanel, ...
                    'Style','Edit', ...
                    'Units','normalized',...
                    'Position', [335/950 230/428 300/950 30/428])

                SSNDBEdit = uicontrol(...
                    'Parent', patientDBPanel,...
                    'Style','Edit',...
                    'Units','normalized',...
                    'Position', [335/950 170/428 300/950 30/428])

% database after inserting patientID
%--------------------------------------------------------------------------
% panel containing all objects of the entry of an examination

% dummy values
%###########################
patientName = 'John Smith';
patientID = '18121992';
examinationName = 'Examination: Upper left hand';
exposureValue = 'Exposure: 30 ms';
gainValue = 'Gain: ISO 100';
kernelSizeValue = 'Kernel size: 3 x 3 px'
%###########################

examinationPanel = uipanel(...
    'Parent', background, ...
    'Position',[0 0 1 1],...
    'BackgroundColor','white',...
    'Bordertype','none',...
    'Visible', 'off')

        % panel housing the 3 displayed images
        imageDisplayPanel = uipanel(...
            'Parent', examinationPanel, ...
            'Position',[35/1020 35/640 950/1020 275/640], ...
            'BackgroundColor','white', ...
            'Visible', 'on')

                image_T0 = axes(...
                    'Parent', imageDisplayPanel, ...
                    'Position',[35/1020 20/640 220/1020 605/640 ])

                image_T1 = axes(...
                    'Parent', imageDisplayPanel,...
                    'Position',[405/1020 20/640 220/1020 605/640 ])

                image_T2 = axes(...
                    'Parent', imageDisplayPanel,...
                    'Position',[765/1020 20/640 220/1020 605/640 ])

        % panel housing name and additional information
        patientInfoPanel = uipanel(...
            'Parent', examinationPanel,...
            'Position',[35/1020 330/640 230/1020 235/640],...
            'BackgroundColor','white',...
            'Visible', 'on')

                % Symbol of user
                patientSymbolIcon = axes(...
                    'Parent', patientInfoPanel, ...
                    'Position', [30/230 169/235 46/230 46/235])

                patientNameDBLabel = uicontrol(...
                    'Parent', patientInfoPanel,...
                    'Units','normalized',...
                    'Position', [86/230 193/235 129/230 22/235],...
                    'Style', 'Text', ...
                    'String', patientName,...
                    'FontSize', 20, ...
                    'BackgroundColor','white')

                % patient ID under the name right to the icon
                patientIDDBLabel = uicontrol(...
                    'Parent', patientInfoPanel,...
                    'Units','normalized',...
                    'Position',[86/235 169/230 129/235 20/230],...
                    'FontSize', 18, ...
                    'BackgroundColor','white',...
                    'Style','Text',...
                    'String', patientID)

                % TODO: check function, which for two line title // alternatively
                %       resize patientInfoPanel


                % title of the examination
                examinationTitleLabel = uicontrol(...
                    'Parent', patientInfoPanel, ...
                    'Units','normalized',...
                    'Position',[20/235 120/230 200/235 22/230],...
                    'FontSize', 18, ...
                    'Style','Text', ...
                    'String', examinationName,...
                    'HorizontalAlignment','left',...
                    'BackgroundColor', 'white')

                % label for exposure time
                exposureValueLabel = uicontrol(...
                    'Parent', patientInfoPanel,...
                    'Units','normalized',...
                    'Position',[20/235 90/230 200/235 22/230],...
                    'FontSize', 16, ...
                    'BackgroundColor','white',...
                    'Style','Text', ...
                    'String', exposureValue, ...
                    'HorizontalAlignment','left')

                % label for exposure time
                gainValueLabel = uicontrol(...
                    'Parent', patientInfoPanel,...
                    'Units','normalized',...
                    'Position',[20/235 60/230 200/235 22/230],...
                    'FontSize', 16, ...
                    'BackgroundColor','white', ...
                    'Style','Text', ...
                    'String', gainValue, ...
                    'HorizontalAlignment','left')

                % label for kernel size
                kernelSizeValueLabel = uicontrol(...
                    'Parent', patientInfoPanel,...
                    'Units','normalized',...
                    'Position', [20/235 30/230 200/235 22/230],...
                    'FontSize', 16, ...
                    'BackgroundColor','white',...
                    'Style','Text', ...
                    'String', kernelSizeValue, ...
                    'HorizontalAlignment','left')

        % graph containing the measured roi values for the given
        % measurement
        roiGraphDB = axes(...
            'Parent', examinationPanel,...
            'Position', [280/1020 330/640 700/1020 275/640])



sectionButtonPanel = uipanel(...
    'Position', [49/1280 505/720 142/1280 142/720], ...
    'BackgroundColor', 'white');

auxillaryPanel = uipanel(...
    'Position', [185/1280 507/720 10/1280 138/720],...
    'Bordertype', 'none', ...
    'BackgroundColor', 'white');

laserStopButton = uicontrol(...
    'Style','pushbutton',...
    'Units','normalized',...
    'Position', [65/1280 89/720 110/1280 110/720], ...
    'String', 'Stop Laser', ...
    'BackgroundColor',[1 0 0],...
    'Callback', @stopLaserButton_Callback);

% BUTTONS
%#########################################################################

% section button for history
historyButton = uicontrol(...
    'Style','pushbutton',...
    'Units','normalized',...
    'Position', [65/1280 233/720 110/1280 110/720],...
    'String', 'History',...
    'Callback',{@historyButton_Callback, auxillaryPanel,...         
    enterPatientIDPanel, examinationPanel, examinationTablePanel,...   
    sectionButtonPanel,historyPanel,imageDisplayPanel,measurePanel, ...           8
    patientDBPanel,patientInfoPanel,patientPanel,roi1Panel,...
    roi2Panel,saveMeasurementPanel,savePanel,settingsPanel,...
    startRecordingPanel,videoPanel});

% section button for measure
measureButton = uicontrol(...
    'Style','pushbutton',...
    'Units','normalized',...
    'Position', [65/1280 377/720 110/1280 110/720],...
    'String', 'Measure',...
    'Callback',{@measureButton_Callback, auxillaryPanel,...         
    enterPatientIDPanel, examinationPanel, examinationTablePanel,...   
    sectionButtonPanel,historyPanel,imageDisplayPanel,measurePanel, ...           8
    patientDBPanel,patientInfoPanel,patientPanel,roi1Panel,...
    roi2Panel,saveMeasurementPanel,savePanel,settingsPanel,...
    startRecordingPanel,videoPanel});

% section button for settings
settingsButton = uicontrol(...
    'Style','pushbutton',...
    'Units','normalized',...
    'Position', [65/1280 521/720 110/1280 110/720],...
    'String', 'Settings',...
    'Callback',{@settingsButton_Callback, auxillaryPanel,...         
    enterPatientIDPanel, examinationPanel, examinationTablePanel,...   
    sectionButtonPanel,historyPanel,imageDisplayPanel,measurePanel, ...           8
    patientDBPanel,patientInfoPanel,patientPanel,roi1Panel,...
    roi2Panel,saveMeasurementPanel,savePanel,settingsPanel,...
    startRecordingPanel,videoPanel});

% button for the ROI section
roiButton = uicontrol(...
    'Parent', measurePanel,...
    'Units','normalized',...
    'Style', 'pushbutton', ...
    'String', 'ROI',...
    'Position',[170/425 481/640 110/425 110/640],...
    'Callback',{@roiButton_Callback,auxillaryPanel,...         
    enterPatientIDPanel, examinationPanel, examinationTablePanel,...   
    sectionButtonPanel,historyPanel,imageDisplayPanel,measurePanel, ...           8
    patientDBPanel,patientInfoPanel,patientPanel,roi1Panel,...
    roi2Panel,saveMeasurementPanel,savePanel,settingsPanel,...
    startRecordingPanel,videoPanel})

% patient Button
patientButton = uicontrol(...
    'Parent', measurePanel,...
    'Units','normalized',...
    'Style', 'pushbutton',...
    'String', 'Patient', ...
    'Position',[35/425 481/640 110/425 110/640],...
    'Callback',{@patientButton_Callback,auxillaryPanel,...         
    enterPatientIDPanel, examinationPanel, examinationTablePanel,...   
    sectionButtonPanel,historyPanel,imageDisplayPanel,measurePanel, ...           
    patientDBPanel,patientInfoPanel,patientPanel,roi1Panel,...
    roi2Panel,saveMeasurementPanel,savePanel,settingsPanel,...
    startRecordingPanel,videoPanel})

% start/stop button for recording
startRecordingButton = uicontrol(...
    'Parent', measurePanel,...
    'Units','normalized',...
    'Style', 'pushbutton', ...
    'String', 'Start Recording',...
    'Position',[305/425 481/640 110/425 110/640], ...
    'Callback',{@startRecordingButton_Callback,auxillaryPanel,...         
    enterPatientIDPanel, examinationPanel, examinationTablePanel,...   
    sectionButtonPanel,historyPanel,imageDisplayPanel,measurePanel, ...           
    patientDBPanel,patientInfoPanel,patientPanel,roi1Panel,...
    roi2Panel,saveMeasurementPanel,savePanel,settingsPanel,...
    startRecordingPanel,videoPanel})


% save button for a finished examination
saveExaminationButton = uicontrol('Parent', saveMeasurementPanel,...
    'Style', 'Pushbutton','Units','normalized',...
    'Position', [290/380 25/110 70/380 30/110], 'String', 'Save', ...
    'Callback',{@saveExaminationButton_Callback,auxillaryPanel,...         
    enterPatientIDPanel, examinationPanel, examinationTablePanel,...   
    sectionButtonPanel,historyPanel,imageDisplayPanel,measurePanel, ...           
    patientDBPanel,patientInfoPanel,patientPanel,roi1Panel,...
    roi2Panel,saveMeasurementPanel,savePanel,settingsPanel,...
    startRecordingPanel,videoPanel})

% patient ID button in history section
enterpatientIDButton = uicontrol('Parent', enterPatientIDPanel,...
    'Style', 'Pushbutton','Units','normalized',...
    'Position', [305/455 25/110 130/455 22/110], 'String', ...
    'Enter', 'FontSize', 16,'Callback',...
    {@enterPatientIDButton_Callback,auxillaryPanel,...         
    enterPatientIDPanel, examinationPanel, examinationTablePanel,...   
    sectionButtonPanel,historyPanel,imageDisplayPanel,measurePanel, ...           
    patientDBPanel,patientInfoPanel,patientPanel,roi1Panel,...
    roi2Panel,saveMeasurementPanel,savePanel,settingsPanel,...
    startRecordingPanel,videoPanel})

% return button on the examination panel 
backToExaminationsButton = uicontrol('Parent', examinationPanel,...
    'Units','normalized',...
    'Position', [35/1020 575/640 230/1020 30/640], 'String', 'Back to History', 'FontSize',...
    18, 'Style', 'Pushbutton', 'Callback', {@returnButton_Callback, auxillaryPanel,...         
    enterPatientIDPanel, examinationPanel, examinationTablePanel,...   
    sectionButtonPanel,historyPanel,imageDisplayPanel,measurePanel, ...           
    patientDBPanel,patientInfoPanel,patientPanel,roi1Panel,...
    roi2Panel,saveMeasurementPanel,savePanel,settingsPanel,...
    startRecordingPanel,videoPanel})



%####################################################
% array handleCollection containing all panels, which in turn
% are the parent of all objects for the desired function

% handleCollection = ...
%     [auxillaryPanel,...         1
%     enterPatientIDPanel,...     2
%     examinationPanel,...        3
%     examinationTablePanel,...   4
%     sectionButtonPanel,...      5
%     historyPanel,...            6
%     imageDisplayPanel,...       7
%     measurePanel, ...           8
%     patientDBPanel,...          9
%     patientInfoPanel,...        10
%     patientPanel,...            11
%     roi1Panel,...               12
%     roi2Panel,...               13
%     saveMeasurementPanel,...    14
%     savePanel,...               15
%     sectionButtonPanel,...      16
%     settingsPanel,...           17
%     startRecordingPanel,...     18
%     videoPanel];%               19





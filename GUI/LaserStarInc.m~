%% Graphical user interface for the LaserStarInc software
% Common objects for the whole interface
% dummy patient name
%#########################
patientName = 'Max Mustermann';
physicianName = 'Dr. Acula';
patientID = '1212653067'

cornerTextPhysician = sprintf('Physician: %s', physicianName)
patientLogged = false;

if patientLogged
    
end
%#########################



handles.fig = figure(...
    'Visible', 'on',...
    'Position', [100 100 1280 720],...
    'Name', 'LaserStarInc', ...
    'Toolbar', 'none', ...
    'MenuBar', 'none');

handles.background = uipanel(...
    'Title','',...
    'Position',[190/1280 40/720 1020/1280 640/720],...
    'BackgroundColor', 'white',...
    'Visible', 'on');
% 
% patientLoginStatusPanel = uipanel(...
%     'Parent', background,...
%     'BackgroundColor', 'white',...
%     'Position', []

handles.commonPhysicianLabel = uicontrol(...
    'Parent', handles.background,...
    'Style', 'Text',...
    'BackgroundColor', 'white',...
    'Units', 'normalized',...
    'Position', [5/1020 615/640 150/1020 20/640],...
    'HorizontalAlignment', 'left',...
    'FontSize', 16,...
    'String', cornerTextPhysician)

%--------------------------------------------------------------------------
% videoPanel
handles.videoPanel = uipanel(...
    'Parent', handles.background,...
    'Position', [445/1020 35/640 540/1020 570/640],...
    'Bordertype','none',...
    'Visible', 'off')

        handles.videoStream = axes(...
            'Parent', handles.videoPanel, ...
            'Position', [0 0 1 1])
%--------------------------------------------------------------------------

%predifined dummy variables
%#################################################
minIso = 50; maxIso = 1600; iso = 100;
minExposure = 5; maxExposure = 10; exposure = 7;
minKernel = 3; maxKernel = 9; kernel = 5;
%#################################################

% Settings Window panel [reorganized by dedicated panel]
% panel half the size of the background panel
handles.settingsPanel = uipanel(...
    'Parent', handles.background, ...
    'Position', [0 0 425/1020 605/640],...
    'Bordertype', 'none',...
    'Visible', 'off', ...
    'BackgroundColor', 'white')

        % Button at the bottom responsible for starting the laser
        handles.buttonStartSettings = uicontrol(...
            'Parent', handles.settingsPanel,...
            'Units', 'normalized', ...
            'Style', 'pushbutton',...
            'Position', [35/425 54/605 380/425 100/605],...
            'String','Start System with set Parameters',...
            'FontSize',20)

        % kernel size axis for the image [checkup needed for images]
        handles.kernelImg = axes(...
            'Parent', handles.settingsPanel,...
            'Position', [49/425 216/605 64/425 64/605]);

        % slider to set the kernel size
        handles.kernSlider = uicontrol(...
            'Parent', handles.settingsPanel, ...
            'Min',minKernel,'Max',maxKernel,'Value',kernel,...
            'Units','normalized',...
            'Style', 'slider',...
            'Position', [145/425 248/605 240/425 3/605],...
            'Callback', @kernSlider_Callback)

        % Gain size axis for the image [checkup needed for images]
        handles.gainImg = axes(...
            'Parent', handles.settingsPanel,...
            'Position', [49/425 360/605 64/425 64/605]);

        % slider to set the gain
        handles.gainSlider = uicontrol(...
            'Parent', handles.settingsPanel,...
            'Min',minIso,'Max',maxIso,'Value',iso,...
            'Units','normalized',...
            'Style', 'slider', ...
            'Position', [145/425 392/605 240/425 3/605],...
            'Callback', @gainSlider_Callback)

        % Exposure size axis for the image [checkup needed for images]
        handles.exposureImg = axes(...
            'Parent', handles.settingsPanel, ...
            'Position', [49/425 504/605 64/425 64/605]);

        % slider to set the exposure
        handles.exposureSlider = uicontrol(...
            'Parent', handles.settingsPanel,...
            'Min',minExposure,'Max',maxExposure,'Value',exposure,...
            'Units','normalized',...
            'Style', 'slider', ...
            'Position', [145/425 536/605 240/425 3/605],...
            'Callback',{@exposureSlider_Callback,handles})

% MEASURE
%##########################################################################
%##########################################################################

% Measure panel with common elements
%--------------------------------------------------------------------------

handles.measurePanel = uipanel(...
    'Parent', handles.background, ...
    'Position', [0 0 425/1020 605/640],...
    'Bordertype', 'none',...
    'Visible', 'off', ...
    'BackgroundColor', 'white')

% % PATIENT
%##########################################################################
%##########################################################################

% measure: Patient windows section
%--------------------------------------------------------------------------

%panel for the patient button
handles.patientPanel = uipanel(...
    'Parent', handles.measurePanel,...
    'Position', [0 0  1 460/605],...
    'Bordertype', 'none', ...
    'BackgroundColor', 'white', ...
    'Visible', 'off')

        % Label indicating the user to enter the patientID
        handles.patientIDLabel = uicontrol(...
            'Parent', handles.patientPanel,...
            'Style', 'Text',...
            'Units','normalized',...
            'String', 'Enter PatientID',...
            'FontSize', 24,...
            'Position', [35/425 417/460 380/425 30/460],...
            'HorizontalAlignment','left', ...
            'BackgroundColor', 'white')

        handles.patientIDField = uicontrol(...
            'Parent', handles.patientPanel,...
            'Units','normalized',...
            'Style', 'Edit', ...
            'Position', [35/425 377/460 380/425 30/460])

        handles.enterButton = uicontrol(...
            'Parent', handles.patientPanel, ...
            'Style', 'pushbutton', ...
            'Units','normalized',...
            'Position', [35/425 338/460 100/425 30/460],...
            'String', 'Enter');

        % Title to register new patient
        handles.registerPatientLabel = uicontrol(...
            'Parent', handles.patientPanel,...
            'Style', 'Text',...
            'Units','normalized', ...
            'Position', [35/425 273/460 380/425 30/460], ...
            'String', 'Register new Patient',...
            'FontSize', 24, ...
            'BackgroundColor', 'white');

        % Label indicating the user to enter name
        handles.nameLabel = uicontrol(...
            'Parent', handles.patientPanel,...
            'Style', 'Text', ...
            'String', 'Name', ...
            'Units','normalized', ...
            'FontSize', 20, ...
            'Position',[35/425 233/460 380/425 30/460], ...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % Name edit field
        handles.nameField = uicontrol(...
            'Parent', handles.patientPanel, ...
            'Style','Edit',...
            'Units','normalized',...
            'Position', [35/425 194/460 380/425 30/460])

        % SSN Label
        handles.SSNLabel= uicontrol(...
            'Parent', handles.patientPanel, ...
            'Style', 'Text', ...
            'String','Social Security Number', ...
            'FontSize', 20,...
            'Units','normalized',... 
            'Position', [35/425 129/460 380/425 30/460],...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % SSN edit field
        handles.SSNEdit = uicontrol(...
            'Parent', handles.patientPanel,...
            'Units','normalized',...
            'Position', [35/425 89/460 380/425 30/460],...
            'Style','Edit')

        % Enter Button
        handles.enter2Button = uicontrol(...
            'Parent', handles.patientPanel,...
            'Units','normalized',...
            'Position', [35/425 50/460 100/425 30/460],...
            'Style', 'Pushbutton', ...
            'String', 'Enter')

% ROI
%##########################################################################
%##########################################################################

% Measure section: ROI
%--------------------------------------------------------------------------

% Panel for ROI1
handles.roi1Panel = uipanel(...
    'Parent', handles.measurePanel, ...
    'Position',[35/425 258/605 380/425 189/605], ...
    'BackgroundColor', 'white',...
    'Visible', 'off')

handles.roi2Panel = uipanel(...
    'Parent', handles.measurePanel,...
    'Position',[35/425 49/605 380/425 189/605], ...
    'BackgroundColor', 'white',...
    'Visible', 'off')

% Inside ROI1
%--------------------------------------------------------------------------

        % Size label
        handles.sizeLabel1 = uicontrol(...
            'Parent', handles.roi1Panel,...
            'Units','normalized', ...
            'Position', [20/380 149/189 136/380 24/189],...
            'FontSize', 20, ...
            'String', 'Size', ...
            'Style', 'Text', ...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % Height label
        handles.heightLabel1 = uicontrol(...
            'Parent', handles.roi1Panel, ...
            'Units','normalized',...
            'Position', [20/380 99/189 75/380 24/189],...
            'FontSize', 16, ...
            'String', 'Height:', ...
            'Style', 'Text', ....
            'HorizontalAlignment','left', ...
            'BackgroundColor', 'white')

        % Width label
        handles.widthLabel1 = uicontrol(...
            'Parent', handles.roi1Panel, ...
            'Units','normalized',...
            'Position', [20/380 59/189 75/380 24/189],...
            'FontSize', 16, ...
            'String', 'Width:', ...
            'Style', 'Text', ...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % x label
        handles.xLabel1 = uicontrol(...
            'Parent', handles.roi1Panel,...
            'Units','normalized',...
            'Position', [188/380 99/189 85/380 24/189],...
            'FontSize', 16, ...
            'String', 'x:', ...
            'Style', 'Text',...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % y label
        handles.yLabel1 = uicontrol(...
            'Parent', handles.roi1Panel, ....
            'Units','normalized',...
            'Position', [188/380 59/189 85/380 24/189],...
            'FontSize', 16, ...
            'String', 'y:', ...
            'Style', 'Text',...
            'HorizontalAlignment','left', ...
            'BackgroundColor', 'white')

        % Position label
        handles.PositionLabel1 = uicontrol(...
            'Parent', handles.roi1Panel, ...
            'Units','normalized',...
            'Position', [188/380 149/189 136/380 24/189],...
            'FontSize', 20, ...
            'String', 'Position', ...
            'Style', 'Text',...
            'HorizontalAlignment', 'left',...
            'BackgroundColor', 'white')

        % Editfield for height
        handles.height1Edit = uicontrol(...
            'Parent', handles.roi1Panel,...
            'Units','normalized',...
            'Position', [85/380 99/189 85/380 24/189],...
            'Style', 'Edit')

        % edditfield for width
        handles.width1Edit = uicontrol(...
            'Parent', handles.roi1Panel, ...
            'Units','normalized',...
            'Position', [85/380 59/189 85/380 24/189], ...
            'Style', 'Edit')

        handles.x1Edit = uicontrol(...
            'Parent', handles.roi1Panel,...
            'Units','normalized',...
            'Position', [210/380 99/189 85/380 24/189], ...
            'Style', 'Edit')

        % panel for all the objects dedicated to ROI 1
        handles.y1Edit = uicontrol(...
            'Parent', handles.roi1Panel,...
            'Units','normalized',...
            'Position', [210/380 59/189 85/380 24/189],...
            'Style', 'Edit')

        % remove button to delete an existing ROI 1
        handles.rmvROI1 = uicontrol(...
            'Parent', handles.roi1Panel,...
            'Units','normalized',...
            'Position', [316/380 25/189 44/380 44/189], ...
            'String', 'Rmv', ...
            'Style', 'Pushbutton')
        
% TODO: symbol for remove / add

        % add button to create a new ROI1
        handles.addROI1 = uicontrol(...
            'Parent', handles.roi1Panel,...
            'Units','normalized',...
            'Position', [316/380 99/189 44/380 44/189], ...
            'String', 'Add',...
            'Style', 'Pushbutton')

        % label indicating ROI 1
        handles.labelROI1 = uicontrol(...
            'Style', 'Text', ...
            'Parent', handles.roi1Panel,...
            'Units','normalized',...
            'Position', [321/380 74/189 60/380 20/189],...
            'String','ROI 1',...
            'FontSize', 14,...
            'HorizontalAlignment','left', ...
            'BackgroundColor', 'white');

        % apply button 12 of roi 1 for width and height 
        handles.apply12Button = uicontrol(...
            'Parent', handles.roi1Panel,...
            'Units','normalized',...
            'Position', [210/380 25/189 85/380 24/189],...
            'Style', 'Pushbutton',...
            'String', 'Apply')

        % apply button 11 of roi 1 for width and height
        handles.apply11Button = uicontrol(...
            'Parent', handles.roi1Panel, ...
            'Units','normalized',...
            'Position', [85/380 25/189 85/380 24/189],...
            'Style', 'Pushbutton',...
            'String', 'Apply')
        
% Inside ROI 2
%--------------------------------------------------------------------------


        % Size label
        handles.sizeLabel2 = uicontrol(...
            'Parent', handles.roi2Panel, ...
            'Units','normalized',...
            'Position', [20/380 149/189 136/380 24/189],...
            'FontSize', 20, ...
            'String', 'Size', ...
            'Style', 'Text',...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % Height label
        handles.heightLabel2 = uicontrol(...
            'Parent', handles.roi2Panel, ...
            'Units','normalized',...
            'Position', [20/380 99/189 75/380 24/189],...
            'FontSize', 16, ...
            'String', 'Height:', ...
            'Style', 'Text',...
            'HorizontalAlignment','left', ...
            'BackgroundColor', 'white');

        % Width label
        handles.widthLabel2 = uicontrol(...
            'Parent', handles.roi2Panel,...
            'Units','normalized',...
            'Position', [20/380 59/189 75/380 24/189],...
            'FontSize', 16,...
            'String', 'Width:', ...
            'Style', 'Text',...
            'HorizontalAlignment','left', ...
            'BackgroundColor', 'white')

        % x label
        handles.xLabel2 = uicontrol(...
            'Parent', handles.roi2Panel,...
            'Units','normalized',...
            'Position', [188/380 99/189 85/380 24/189],...
            'FontSize', 16,...
            'String', 'x:', ...
            'Style', 'Text',...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % y label
        handles.yLabel2 = uicontrol(...
            'Parent', handles.roi2Panel,...
            'Units','normalized',...
            'Position', [188/380 59/189 85/380 24/189],...
            'FontSize', 16, ...
            'String', 'y:',...
            'Style', 'Text',...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % Position label
        handles.PositionLabel2 = uicontrol(...
            'Parent', handles.roi2Panel, ...
            'Units','normalized',...
            'Position', [188/380 149/189 136/380 24/189],...
            'FontSize', 20,...
            'String', 'Position',...
            'Style', 'Text',...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white')

        % Editfield for height
        handles.height2Edit = uicontrol(...
            'Parent', handles.roi2Panel, ...
            'Units','normalized',...
            'Position', [85/380 99/189 85/380 24/189],...
            'Style', 'Edit')

        % edditfield for width
        handles.width2Edit = uicontrol(...
            'Parent', handles.roi2Panel,...
            'Units','normalized',...
            'Position', [85/380 59/189 85/380 24/189], ...
            'Style', 'Edit')

        handles.x2Edit = uicontrol(...
            'Parent', handles.roi2Panel,...
            'Units','normalized',...
            'Position', [210/380 99/189 85/380 24/189], ...
            'Style', 'Edit')

        % panel for all the objects dedicated to ROI 2
        handles.y2Edit = uicontrol(...
            'Parent', handles.roi2Panel,...
            'Units','normalized',...
            'Position', [210/380 59/189 85/380 24/189],...
            'Style', 'Edit')

        % remove button to delete an existing ROI 2
        handles.rmvROI2 = uicontrol(...
            'Parent', handles.roi2Panel,...
            'Units','normalized',...
            'Position', [316/380 25/189 44/380 44/189], ...
            'String', 'Rmv',...
            'Style', 'Pushbutton')

        % add button to create a new ROI2
        handles.addROI2 = uicontrol(...
            'Parent', handles.roi2Panel,...
            'Units','normalized',...
            'Position', [316/380 99/189 44/380 44/189], ...
            'String', 'Add',...
            'Style', 'Pushbutton')

        % label indicating ROI 2
        handles.labelROI2 = uicontrol(...
            'Style', 'Text', ...
            'Parent',handles.roi2Panel,...
            'Units','normalized',...
            'Position', [321/380 74/189 60/380 20/189], ...
            'String','ROI 2', ...
            'FontSize', 14,...
            'HorizontalAlignment','left',...
            'BackgroundColor', 'white');

        % apply button 22 of roi 2 for width and height 
        handles.apply22Button = uicontrol(...
            'Parent', handles.roi2Panel,...
            'Units','normalized',...
            'Position', [210/380 25/189 85/380 24/189],...
            'Style', 'Pushbutton', ...
            'String', 'Apply')

        % apply button 22 of roi 2 for width and height
        handles.apply21Button = uicontrol(...
            'Parent', handles.roi2Panel,...
            'Units','normalized',...
            'Position', [85/380 25/189 85/380 24/189],...
            'Style', 'Pushbutton', ...
            'String', 'Apply')

%##########################################################################
%##########################################################################

% Measure Window Start/Stop Recording
%--------------------------------------------------------------------------

% definition of the axes for the presentation of the average
% intensity of the perfusion 

% panel for the objects of measure window start stop recording
handles.startRecordingPanel = uipanel(...
    'Parent',handles.measurePanel, ...
    'Bordertype','none', ...
    'Position', [0 0 1 460/605], ...
    'Visible','off',...
    'BackgroundColor','white')


        handles.roiGraph = axes(...
            'Parent',handles.startRecordingPanel, ...
            'Position',[35/425 35/460 375/425 380/460])

        % Add functionality here - display time recorded here
        handles.timeRecordedLabel = uicontrol(...
            'Parent', handles.startRecordingPanel, ...
            'Units','normalized',...
            'Position',[35/425 431/460 425/425 30/460], ...
            'Style', 'Text', ...
            'String', 'Time Recorded:         00:00', ...
            'FontSize', 20)

%##########################################################################
%##########################################################################

% measure window start/stop save
%--------------------------------------------------------------------------

        % panel housing all elements of save 

        handles.savePanel = uipanel(...
            'Parent', handles.measurePanel,...
            'Position',[0 0 1 460/605], ...
            'Visible', 'off',...
            'Bordertype', 'none',...
            'BackgroundColor', 'white')

                % smaller roiGraph
                handles.smallerRoiGraph = axes(...
                    'Parent',handles.savePanel,...
                    'Position',[35/425 35/460 380/425 288/460]);

                % panel conainting options on how to save
                handles.saveMeasurementPanel = uipanel(...
                    'Parent', handles.savePanel, ...
                    'Position',[35/425 336/460 380/425 110/460],  ...
                    'Visible', 'off', ...
                    'BackgroundColor', 'white');

                        % label examination name
                        handles.examinationNameLabel = uicontrol(...
                            'Parent', handles.saveMeasurementPanel,...
                            'Style', 'Text',...
                            'Units','normalized',...
                            'String', 'Examination Name:', ...
                            'Position',[20/380 65/110 200/380 30/110], ...
                            'FontSize', 20,...
                            'HorizontalAlignment','left',...
                            'BackgroundColor', 'white')

                        % edit field examination name
                        handles.examinationNameEditField = uicontrol(...
                            'Parent', handles.saveMeasurementPanel,...
                            'Units','normalized',...
                            'Position', [20/380 25/110 250/380 30/110],...
                            'Style', 'Edit')

%##########################################################################
%##########################################################################

% HISTORY
%--------------------------------------------------------------------------
% history panel
handles.historyPanel = uipanel(...
    'Parent', handles.background, ...
    'Position',[0 0 1 605/640],...
    'Bordertype', 'none', ...
    'BackgroundColor', 'white',...
    'Visible','off')

        % new patient button
        handles.newPatientButton = uicontrol(...
            'Parent', handles.historyPanel,...
            'Style', 'Pushbutton', ...
            'Units','normalized',...
            'Position', [35/1020 481/605 455/1020 110/605],...
            'String','Register New Patient',...
            'FontSize', 24)

        % panel housing the setup
        handles.enterPatientIDPanel = uipanel(...
            'Parent',handles.historyPanel, ...
            'Position',[530/1020 481/605 455/1020 110/605],...
            'BackgroundColor','white')

                % enter patient ID label
                handles.enterPatientLabel = uicontrol(...
                    'Parent', handles.enterPatientIDPanel,...
                    'Style', 'Text',...
                    'Units','normalized',...
                    'Position', [20/455 61/110 150/455 22/110], ...
                    'String','Enter Patient ID',...
                    'FontSize', 20,...
                    'HorizontalAlignment','left', ...
                    'BackgroundColor', 'white')

                % enter patient ID edit field
                handles.enterPatientIDEditField = uicontrol(...
                    'Parent', handles.enterPatientIDPanel,...
                    'Style', 'Edit', ...
                    'Units','normalized',...
                    'Position', [20/455 25/110 260/455 22/110])


% patient data table
%--------------------------------------------------------------------------
        % panel housing the data table
        handles.examinationTablePanel = uipanel(...
            'Parent', handles.historyPanel, ...
            'Position',[35/1020 35/605 950/1020 428/605], ...
            'BackgroundColor','white',...
            'Visible', 'off')

                % table storing the past examinations
                handles.examinationDataTable = uitable(...
                    'Parent', handles.examinationTablePanel,...
                    'Units','normalized',...
                    'Position',[0 0 1 1],...
                    'ColumnName', {'Examination'; 'Physician'; ...
                    'Date'; 'Exposure';'Gain'; 'ROI Size'},...
                    'RowName', {})
% TODO: setting the length of the columns accordingly
% Database after logging the patient in

% register new patient
%--------------------------------------------------------------------------
        % panel housing the set new patient up objects
        handles.patientDBPanel = uipanel(...
            'Parent', handles.historyPanel, ...
            'Position',[35/1020 35/605 950/1020 428/605],...
            'Visible', 'off', ...
            'BackgroundColor','white')

                % setup new patient label
                handles.setupPatientLabel = uicontrol(...
                    'Parent', handles.patientDBPanel, ...
                    'Style','Text',...
                    'Units','normalized',...
                    'FontSize', 24,...
                    'Position', [35/950 325/428 350/950 30/428],...
                    'String','Setup new Patient',...
                    'HorizontalAlignment','left', ...
                    'BackgroundColor', 'white')

                % name label
                handles.nameDBLabel = uicontrol(...
                    'Parent', handles.patientDBPanel, ...
                    'Style','Text',...
                    'FontSize', 20, ...
                    'Units','normalized',...
                    'Position', [35/950 230/428 270/950 30/428],...
                    'String','Name:',...
                    'HorizontalAlignment','left',...
                    'BackgroundColor', 'white')

                % social security number label
                handles.SSNDBLabel = uicontrol(...
                    'Parent', handles.patientDBPanel, ...
                    'Style','Text',...
                    'FontSize', 20, ...
                    'Units','normalized',...
                    'Position', [35/950 170/428 270/950 30/428], ...
                    'String','Social Security Number: ',...
                    'HorizontalAlignment','left',...
                    'BackgroundColor', 'white')

                % save button
                handles.saveDBButton = uicontrol(...
                    'Parent', handles.patientDBPanel, ...
                    'Style','Pushbutton',...
                    'FontSize', 20,...
                    'Units','normalized',...
                    'Position', [35/950 90/428 270/950 50/428], ...
                    'String','Save')

                handles.nameDBEdit = uicontrol(...
                    'Parent', handles.patientDBPanel, ...
                    'Style','Edit', ...
                    'Units','normalized',...
                    'Position', [335/950 230/428 300/950 30/428])

                handles.SSNDBEdit = uicontrol(...
                    'Parent', handles.patientDBPanel,...
                    'Style','Edit',...
                    'Units','normalized',...
                    'Position', [335/950 170/428 300/950 30/428])

% database after inserting patientID
%--------------------------------------------------------------------------
% panel containing all objects of the entry of an examination

% dummy values
%###########################
patientName = 'John Smith';
patientID = '18121992';
examinationName = 'Examination: Upper left hand';
exposureValue = 'Exposure: 30 ms';
gainValue = 'Gain: ISO 100';
kernelSizeValue = 'Kernel size: 3 x 3 px'
%###########################

handles.examinationPanel = uipanel(...
    'Parent', handles.background, ...
    'Position',[0 0 1 605/640],...
    'BackgroundColor','white',...
    'Bordertype','none',...
    'Visible', 'off')

        % panel housing the 3 displayed images
        handles.imageDisplayPanel = uipanel(...
            'Parent', handles.examinationPanel, ...
            'Position',[35/1020 35/605 950/1020 275/605], ...
            'BackgroundColor','white', ...
            'Visible', 'on')

                handles.image_T0 = axes(...
                    'Parent', handles.imageDisplayPanel, ...
                    'Position',[35/1020 20/640 220/1020 605/640 ])

                handles.image_T1 = axes(...
                    'Parent', handles.imageDisplayPanel,...
                    'Position',[405/1020 20/640 220/1020 605/640 ])

                handles.image_T2 = axes(...
                    'Parent', handles.imageDisplayPanel,...
                    'Position',[765/1020 20/640 220/1020 605/640 ])

        % panel housing name and additional information
        handles.patientInfoPanel = uipanel(...
            'Parent', handles.examinationPanel,...
            'Position',[35/1020 330/605 230/1020 235/605],...
            'BackgroundColor','white',...
            'Visible', 'on')

                % Symbol of user
                handles.patientSymbolIcon = axes(...
                    'Parent', handles.patientInfoPanel, ...
                    'Position', [30/230 169/235 46/230 46/235])

                handles.patientNameDBLabel = uicontrol(...
                    'Parent', handles.patientInfoPanel,...
                    'Units','normalized',...
                    'Position', [86/230 193/235 129/230 22/235],...
                    'Style', 'Text', ...
                    'String', patientName,...
                    'FontSize', 20, ...
                    'BackgroundColor','white')

                % patient ID under the name right to the icon
                handles.patientIDDBLabel = uicontrol(...
                    'Parent', handles.patientInfoPanel,...
                    'Units','normalized',...
                    'Position',[86/235 169/230 129/235 20/230],...
                    'FontSize', 18, ...
                    'BackgroundColor','white',...
                    'Style','Text',...
                    'String', patientID)

                % TODO: check function, which for two line title // alternatively
                %       resize patientInfoPanel


                % title of the examination
                handles.examinationTitleLabel = uicontrol(...
                    'Parent', handles.patientInfoPanel, ...
                    'Units','normalized',...
                    'Position',[20/235 120/230 200/235 22/230],...
                    'FontSize', 18, ...
                    'Style','Text', ...
                    'String', examinationName,...
                    'HorizontalAlignment','left',...
                    'BackgroundColor', 'white')

                % label for exposure time
                handles.exposureValueLabel = uicontrol(...
                    'Parent', handles.patientInfoPanel,...
                    'Units','normalized',...
                    'Position',[20/235 90/230 200/235 22/230],...
                    'FontSize', 16, ...
                    'BackgroundColor','white',...
                    'Style','Text', ...
                    'String', exposureValue, ...
                    'HorizontalAlignment','left')

                % label for exposure time
                handles.gainValueLabel = uicontrol(...
                    'Parent', handles.patientInfoPanel,...
                    'Units','normalized',...
                    'Position',[20/235 60/230 200/235 22/230],...
                    'FontSize', 16, ...
                    'BackgroundColor','white', ...
                    'Style','Text', ...
                    'String', gainValue, ...
                    'HorizontalAlignment','left')

                % label for kernel size
                handles.kernelSizeValueLabel = uicontrol(...
                    'Parent', handles.patientInfoPanel,...
                    'Units','normalized',...
                    'Position', [20/235 30/230 200/235 22/230],...
                    'FontSize', 16, ...
                    'BackgroundColor','white',...
                    'Style','Text', ...
                    'String', kernelSizeValue, ...
                    'HorizontalAlignment','left')

        % graph containing the measured roi values for the given
        % measurement
        handles.roiGraphDB = axes(...
            'Parent', handles.examinationPanel,...
            'Position', [280/1020 330/605 700/1020 275/605])



handles.sectionButtonPanel = uipanel(...
    'Position', [49/1280 505/720 142/1280 142/720], ...
    'BackgroundColor', 'white');

handles.auxillaryPanel = uipanel(...
    'Position', [185/1280 507/720 10/1280 138/720],...
    'Bordertype', 'none', ...
    'BackgroundColor', 'white');


% loading in images
%#########################################################################

% load and scale history Icon image
historyIcon = imread('history copy.jpg');
historyIcon = imresize(historyIcon, 0.5)

% settings icon
settingsIcon = imread('settings-gears copy 2.jpg');

% measure icon
measureIcon = imread('measure copy.jpg');
measureIcon = imresize(measureIcon, 0.5);

stopIcon = imread('stop copy.jpg');
stopIcon = imresize(stopIcon, 0.5);

contrastIcon = imread('contrast.jpg');
contra

% BUTTONS
%#########################################################################

handles.laserStopButton = uicontrol(...
    'Style','pushbutton',...
    'Units','normalized',...
    'Position', [65/1280 89/720 110/1280 110/720], ...
    ...'String', 'Stop Laser', ...
    'CData', stopIcon,...
    'BackgroundColor',[1 0 0],...
    'Callback', @stopLaserButton_Callback);

% section button for history
handles.historyButton = uicontrol(...
    'Style','pushbutton',...
    'Units','normalized',...
    'Position', [65/1280 233/720 110/1280 110/720],...
    ...'String', 'History',...
    'CData', historyIcon,...
    'Callback',{@historyButton_Callback, handles});

% section button for measure
handles.measureButton = uicontrol(...
    'Style','pushbutton',...
    'Units','normalized',...
    'Position', [65/1280 377/720 110/1280 110/720],...
    ...'String', 'Measure',...
    'CData', measureIcon,...
    'Callback',{@measureButton_Callback, handles});

% section button for settings
handles.settingsButton = uicontrol(...
    'Style','pushbutton',...
    'Units','normalized',...
    'Position', [65/1280 521/720 110/1280 110/720],...
    ...'String', 'Settings',...
    'CData', settingsIcon,...
    'Callback',{@settingsButton_Callback, handles});

% button for the ROI section
handles.roiButton = uicontrol(...
    'Parent', handles.measurePanel,...
    'Units','normalized',...
    'Style', 'pushbutton', ...
    'String', 'ROI',...
    'Position',[170/425 481/605 110/425 110/605],...
    'Callback',{@roiButton_Callback,handles})

% patient Button
handles.patientButton = uicontrol(...
    'Parent', handles.measurePanel,...
    'Units','normalized',...
    'Style', 'pushbutton',...
    'String', 'Patient', ...
    'Position',[35/425 481/605 110/425 110/605],...
    'Callback',{@patientButton_Callback,handles})

% start/stop button for recording
handles.startRecordingButton = uicontrol(...
    'Parent', handles.measurePanel,...
    'Units','normalized',...
    'Style', 'pushbutton', ...
    'String', 'Start Recording',...
    'Position',[305/425 481/605 110/425 110/605], ...
    'Callback',{@startRecordingButton_Callback,handles})


% save button for a finished examination
handles.saveExaminationButton = uicontrol(...
    'Parent', handles.saveMeasurementPanel,...
    'Style', 'Pushbutton',...
    'Units','normalized',...
    'Position', [290/380 25/110 70/380 30/110],...
    'String', 'Save', ...
    'Callback',{@saveExaminationButton_Callback,handles})

% patient ID button in history section
handles.enterpatientIDButton = uicontrol(...
    'Parent', handles.enterPatientIDPanel,...
    'Style', 'Pushbutton',...
    'Units','normalized',...
    'Position', [305/455 25/110 130/455 22/110], ...
    'String', 'Enter', ...
    'FontSize', 16,...
    'Callback',{@enterPatientIDButton_Callback,handles})

% return button on the examination panel 
handles.backToExaminationsButton = uicontrol(...
    'Parent', handles.examinationPanel,...
    'Units','normalized',...
    'Position', [35/1020 575/605 230/1020 30/605],...
    'String', 'Back to History', ...
    'FontSize',18, ...
    'Style', 'Pushbutton', ...
    'Callback', {@returnButton_Callback, handles})



%####################################################
% array handleCollection containing all panels, which in turn
% are the parent of all objects for the desired function
% NOTE: did not work as expected, more time has to be invested here

% handleCollection = ...
%     [auxillaryPanel,...         1
%     enterPatientIDPanel,...     2
%     examinationPanel,...        3
%     examinationTablePanel,...   4
%     sectionButtonPanel,...      5
%     historyPanel,...            6
%     imageDisplayPanel,...       7
%     measurePanel, ...           8
%     patientDBPanel,...          9
%     patientInfoPanel,...        10
%     patientPanel,...            11
%     roi1Panel,...               12
%     roi2Panel,...               13
%     saveMeasurementPanel,...    14
%     savePanel,...               15
%     sectionButtonPanel,...      16
%     settingsPanel,...           17
%     startRecordingPanel,...     18
%     videoPanel];%               19






